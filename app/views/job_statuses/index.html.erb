<% provide :page_header do %>
  <h1><%= "Job Statuses" %></h1>
<% end %>

<h2 class="title-header">Actions</h2>
<%= link_to(
      'All',
      Rails.application.routes.url_helpers.job_statuses_path,
      class: 'btn btn-default'
    ) %>
&nbsp;
<%= link_to(
      'Failed',
      Rails.application.routes.url_helpers.job_statuses_failed_path,
      class: 'btn btn-default'
    ) %>
&nbsp;
<%= link_to(
      'Finished',
      Rails.application.routes.url_helpers.job_statuses_finished_path,
      class: 'btn btn-default'
    ) %>
&nbsp;
<%= link_to(
      'Has Error',
      Rails.application.routes.url_helpers.job_statuses_has_error_path,
      class: 'btn btn-default'
    ) %>
&nbsp;
<%= link_to(
      'Not Finished',
      Rails.application.routes.url_helpers.job_statuses_not_finished_path,
      class: 'btn btn-default'
    ) %>
&nbsp;
<%= link_to(
      'Started',
      Rails.application.routes.url_helpers.job_statuses_started_path,
      class: 'btn btn-default'
    ) %>
&nbsp;

<br/>

<%= form_tag( main_app.job_statuses_path, method: 'post' ) do %>
  <table style="width:40em;">
    <tr>
      <td><%= label_tag(:begin_date_label, 'Begin Date') %></td>
      <td>
        <%= date_field_tag( :begin_date, @presenter.begin_date.strftime("%Y-%m-%d"), class: 'datepicker form-control') %>
      </td>
      <td><%= label_tag(:end_date_label, 'End Date') %></td>
      <td>
        <%= date_field_tag( :end_date, @presenter.end_date.strftime("%Y-%m-%d"), class: 'datepicker form-control') %>
      </td>
      <td> <%= submit_tag( "Reload", class: 'btn btn-primary' ) %> </td>
    </tr>
  </table>
<% end %>

<table>
  <thead>
    <tr>
      <th colspan="7"></th>
    </tr>
  </thead>

  <tbody>
    <% @job_statuses.each do |job_status| %>
      <tr>
        <td><%= job_status.id %></td>
        <td><%= job_status.updated_at %></td>
        <td><%= job_status.job_class %></td>
        <td><%= job_status.main_cc_id %></td>
        <td><%= job_status.status %></td>
        <td><%= job_status.error_snipped %></td>
        <td><%= link_to 'Show', Rails.application.routes.url_helpers.job_status_url( id: job_status.id, only_path: true ) %></td>
        <!-- td><%= link_to 'Edit', edit_job_status_path(job_status) %></td -->
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Job Status', new_job_status_path %>
